"use strict";(self["webpackChunkbxxt"]=self["webpackChunkbxxt"]||[]).push([[154],{1533:function(e,o,t){t.r(o),t.d(o,{default:function(){return S}});var a=t(6252);const n={class:"show"},s=(0,a.Uk)("报修列表"),l={class:"show-body"};function i(e,o,t,i,d,u){const c=(0,a.up)("nav-bar"),r=(0,a.up)("van-search"),p=(0,a.up)("goods-list-item"),g=(0,a.up)("goods-list"),v=(0,a.up)("van-list"),f=(0,a.up)("van-pull-refresh"),m=(0,a.up)("van-tab"),h=(0,a.up)("van-tabs");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(c,null,{left:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[s])),_:1}),(0,a._)("div",l,[(0,a.Wm)(r,{class:"search",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),"show-action":"",placeholder:"请输入搜索关键词",onSearch:i.onSearch},{action:(0,a.w5)((()=>[(0,a._)("div",{onClick:o[0]||(o[0]=(...e)=>i.onClickButton&&i.onClickButton(...e))},"搜索")])),_:1},8,["modelValue","onSearch"]),(0,a.Wm)(h,{active:i.active,"onUpdate:active":o[4]||(o[4]=e=>i.active=e),swipeable:"",sticky:"",color:"#42b983",onChange:i.Change},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.itemName,(e=>((0,a.wg)(),(0,a.j4)(m,{title:e},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:i.state.refreshing,"onUpdate:modelValue":o[3]||(o[3]=e=>i.state.refreshing=e),onRefresh:i.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"van-list",loading:i.state.loading,"onUpdate:loading":o[2]||(o[2]=e=>i.state.loading=e),finished:i.state.finished,"finished-text":"没有更多了",onLoad:i.onLoad,"immediate-check":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"goods-list"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.goods[i.currentType].list,(e=>((0,a.wg)(),(0,a.j4)(p,{product:e,key:e},null,8,["product"])))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","onRefresh"])])),_:2},1032,["title"])))),256))])),_:1},8,["active","onChange"])])])}t(8479);var d=t(8274);const u={class:"goods-list"};function c(e,o,t,n,s,l){return(0,a.wg)(),(0,a.iD)("div",u,[(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var r={name:"GoodsList"},p=t(3744);const g=(0,p.Z)(r,[["render",c],["__scopeId","data-v-a0f76294"]]);var v=g,f=t(2262),m=t(3577);const h=e=>((0,a.dD)("data-v-1d0006b9"),e=e(),(0,a.Cn)(),e),w={class:"goods-head"},_={class:"goods-info"},k={class:"info-title"},b=h((()=>(0,a._)("span",null,"报修项：",-1))),C={class:"info-title"},y=h((()=>(0,a._)("span",null,"地点：",-1))),D={class:"info-title"},T=h((()=>(0,a._)("span",null,"故障：",-1))),z={class:"goods-foot"},L={key:0},H={key:1};function U(e,o,t,n,s,l){const i=(0,a.up)("spanv");return(0,a.wg)(),(0,a.iD)("div",{class:"goods-item",onClick:o[0]||(o[0]=(...e)=>n.itemClick&&n.itemClick(...e))},[(0,a._)("div",w,[(0,a._)("span",null,"单号："+(0,m.zw)(t.product.id),1)]),(0,a._)("div",_,[(0,a._)("div",k,[b,(0,a._)("span",null,(0,m.zw)(t.product.reportContent),1)]),(0,a._)("div",C,[y,(0,a._)("span",null,(0,m.zw)(t.product.dormitory),1)]),(0,a._)("div",D,[T,(0,a._)("span",null,(0,m.zw)(t.product.message),1)])]),(0,a._)("div",z,[(0,a._)("div",null,"报修人："+(0,m.zw)(t.product.name),1),(0,a._)("div",null,"报修时间："+(0,m.zw)(n.formatTime(t.product.createTime)),1),t.product.staus>0?((0,a.wg)(),(0,a.iD)("div",L,"接单人："+(0,m.zw)(t.product.pickUser),1)):(0,a.kq)("",!0),t.product.staus>0?((0,a.wg)(),(0,a.iD)("div",H,[(0,a.Uk)("维修时间："+(0,m.zw)(n.formatTime(t.product.acceptTime))+"-",1),2==t.product.staus?((0,a.wg)(),(0,a.j4)(i,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,m.zw)(n.formatTime(t.product.endTime)),1)])),_:1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])}var R=t(2119),W=t(381),j=t.n(W),q={name:"GoodsListItem",props:{product:{type:Object,default(){return{}}}},setup(e){const o=(0,R.tv)(),t=()=>{o.push({path:"/detail",query:{id:e.product.id}})},a=e=>j()(e).format("YYYY-MM-DD HH:mm");return{itemClick:t,formatTime:a}}};const I=(0,p.Z)(q,[["render",U],["__scopeId","data-v-1d0006b9"]]);var V=I,Y=t(3204),Z=t(4454),x=t(3907),B={name:"Tab",components:{GoodsList:v,GoodsListItem:V,NavBar:Y.Z},setup(){const e=(0,x.oR)(),o=(0,f.qj)({new:{page:1,list:[]},ing:{page:1,list:[]},end:{page:1,list:[]}});let t=(0,f.iH)(0),n=(0,f.iH)("new");const s=(0,f.qj)({loading:!0,finished:!1,refreshing:!1});let l=(0,f.iH)(0),i=["新报修","待维修","已修好"];const u=()=>{console.log("change");let e=["new","ing","end"];n.value=e[l.value],console.log(n.value),m()},c=(0,f.iH)(""),r=e=>(0,d.Z)(e),p=()=>(0,d.Z)(c.value);(0,a.bv)((()=>{console.log("onMounted"),m()}));const g=()=>{console.log("3loadData"),console.log(l.value),(0,Z.R3)(l.value,o[n.value].page,e.state.user.username,e.state.user.identity).then((e=>{o[n.value].list=o[n.value].list.concat(e.data),s.loading=!1,t=e.sumpage,console.log("总页数"+t),console.log("当前页"+o[n.value].page),console.log("当前页数组长度"+e.data.length),o[n.value].page>=t&&(s.finished=!0)}))},v=()=>{console.log("2onLoad"),!s.refreshing&&o[n.value].page<t&&(o[n.value].page+=1),s.refreshing&&(o[n.value].list=[],s.refreshing=!1),g()},m=()=>{console.log("1onRefresh"),s.refreshing=!0,s.finished=!0,s.loading=!0,o[n.value].page=1,v()};return{state:s,onLoad:v,onRefresh:m,onClickButton:p,value:c,onSearch:r,active:l,Change:u,currentType:n,goods:o,totalPage:t,itemName:i}}};const G=(0,p.Z)(B,[["render",i],["__scopeId","data-v-6ed7bec8"]]);var S=G}}]);
//# sourceMappingURL=154.08af3a2b.js.map