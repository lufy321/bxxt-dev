"use strict";(self["webpackChunkbxxt"]=self["webpackChunkbxxt"]||[]).push([[995],{7298:function(e,t,n){n.d(t,{x:function(){return a},z:function(){return s}});var o=n(7707);function a(e){return(0,o.W)({url:"/api/login",method:"post",data:e})}function s(e){return(0,o.W)({url:"/api/register",method:"post",data:e})}},4982:function(e,t,n){n.d(t,{b:function(){return a},n:function(){return s}});var o=n(7707);function a(){return(0,o.W)({url:"/my/getUserInfo"})}function s(){return(0,o.W)({url:"/my/logOut",method:"post"})}},2818:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var o=n(6252);const a={class:"login"},s=(0,o.Uk)("用户登录"),u={class:"top-img"},r={class:"su-button"},l=(0,o.Uk)(" 提交 ");function i(e,t,n,i,m,c){const d=(0,o.up)("nav-bar"),p=(0,o.up)("van-image"),g=(0,o.up)("van-field"),f=(0,o.up)("van-button"),b=(0,o.up)("van-form");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(d,null,{left:(0,o.w5)((()=>[])),default:(0,o.w5)((()=>[s])),_:1}),(0,o._)("div",u,[(0,o.Wm)(p,{width:"10rem",height:"5rem",fit:"contain",src:e.logo},null,8,["src"])]),(0,o.Wm)(b,{onSubmit:i.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),name:"工号",label:"工号",placeholder:"请输入您的工号",rules:[{required:!0,message:"请填写您的工号"}]},null,8,["modelValue"]),(0,o.Wm)(g,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),(0,o._)("div",r,[(0,o._)("div",{class:"link-login",onClick:t[2]||(t[2]=t=>e.$router.push({path:"/register"}))}," 没有账号，立即注册 "),(0,o.Wm)(f,{round:"",block:"",type:"info",color:"#44b883","native-type":"submit"},{default:(0,o.w5)((()=>[l])),_:1})])])),_:1},8,["onSubmit"])])}n(8479);var m=n(8274),c=n(3204),d=n(2119),p=n(2262),g=n(7298),f=n(4982),b=n(3907),v={email:"Register",components:{NavBar:c.Z},setup(){const e=(0,d.tv)(),t=(0,b.oR)(),n=(0,p.qj)({username:"",password:""}),o=(0,p.qj)({logo:"http://nxbx.ejianlong.com:8086/assets/images/logo.png"});console.log(o.logo);const a=()=>{m.Z.loading({duration:0,message:"登录中...",forbidClick:!0}),console.log(n.username),(0,g.x)(n).then((async o=>{window.localStorage.setItem("token",o.token),await(0,f.b)().then((({data:e})=>{t.commit("setUserInfo",e)})),t.commit("setIslogin",!0),console.log(o),m.Z.clear(),0==o.status?(m.Z.success("登录成功,欢迎"+(0==t.state.user.identity?`${t.state.user.username}管理员`:`${t.state.user.username}用户`)),e.go(-1),n.username="",n.password=""):m.Z.fail("登录失败")}))};return{...(0,p.BK)(n),...(0,p.BK)(o),onSubmit:a}}},h=n(3744);const w=(0,h.Z)(v,[["render",i],["__scopeId","data-v-332d8a02"]]);var k=w}}]);
//# sourceMappingURL=995.61012b8c.js.map