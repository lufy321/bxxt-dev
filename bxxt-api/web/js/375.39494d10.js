"use strict";(self["webpackChunkbxxt"]=self["webpackChunkbxxt"]||[]).push([[375],{4454:function(e,t,o){o.d(t,{Nm:function(){return u},R3:function(){return l},Yb:function(){return m},bn:function(){return a},d0:function(){return r},fP:function(){return i},xM:function(){return s}});var n=o(7707);function a(e){return(0,n.W)({url:"/my/addForm",method:"post",data:e})}function l(e,t,o,a){return(0,n.W)({url:`/my/selectForm?staus=${e}&page=${t}&username=${o}&identity=${a}`})}function r(e){return(0,n.W)({url:"/my/upLoad",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function u(e){return(0,n.W)({url:"/my/goods/"+e})}function i(e,t){return(0,n.W)({url:`/my/stausChange?staus=${e}&id=${t}`})}function s(e){return(0,n.W)({url:"/my/updateForm",method:"post",data:e})}function m(e){return(0,n.W)({url:"/my/updateAcceptData",method:"post",data:e})}},5705:function(e,t,o){o.d(t,{FA:function(){return r},Rl:function(){return a},wr:function(){return l}});var n=o(7707);function a(){return(0,n.W)({url:"/my/getOption"})}function l(){return(0,n.W)({url:"/my/getMaterialOption"})}function r(){return(0,n.W)({url:"/my/getSiteOption"})}},8292:function(e,t,o){function n(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1;o=o>=10?o:"0"+o;var n=e.getDate();n=n>=10?n:"0"+n;var a=e.getHours();a=a>=10?a:"0"+a;var l=e.getMinutes();l=l>=10?l:"0"+l;var r=e.getSeconds();return r=r>=10?r:"0"+r,t+"-"+o+"-"+n+" "+a+":"+l+":"+r}o.d(t,{p:function(){return n}})},9843:function(e,t,o){o.d(t,{Z:function(){return m}});var n=o(6252);const a={class:"home-swiper"},l={alt:""};function r(e,t,o,r,u,i){const s=(0,n.up)("van-swipe-item"),m=(0,n.up)("van-swipe"),d=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(m,{class:"swiper",autoplay:3e3,"lazy-render":"","indicator-color":"white"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.banners,((e,t)=>((0,n.wg)(),(0,n.j4)(s,{key:t},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("img",l,null,512),[[d,e]])])),_:2},1024)))),128))])),_:1})])}var u={name:"HomeSwiper",props:{banners:{type:Array,default(){return[]}}},setup(){return{}}},i=o(3744);const s=(0,i.Z)(u,[["render",r],["__scopeId","data-v-49bc2d2a"]]);var m=s},9533:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var n=o(6252);const a={class:"repairs"},l=(0,n.Uk)("报修"),r={class:"repairs-body"},u={class:"form"},i={style:{margin:"16px"}},s=(0,n.Uk)(" 提交 ");function m(e,t,o,m,d,p){const c=(0,n.up)("nav-bar"),f=(0,n.up)("van-field"),h=(0,n.up)("van-cascader"),v=(0,n.up)("van-popup"),w=(0,n.up)("van-uploader"),g=(0,n.up)("van-cell-group"),y=(0,n.up)("van-button"),b=(0,n.up)("van-form");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(c,null,{left:(0,n.w5)((()=>[])),default:(0,n.w5)((()=>[l])),_:1}),(0,n._)("div",r,[(0,n._)("div",u,[(0,n.Wm)(b,{onSubmit:m.onSubmit},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.dormitory,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dormitory=t),"is-link":"",readonly:"",label:"宿舍",placeholder:"请选择所在房间",onClick:t[1]||(t[1]=e=>m.showRoom=!0),rules:[{required:!0,message:"请选择您的报修地点"}]},null,8,["modelValue"]),(0,n.Wm)(v,{show:m.showRoom,"onUpdate:show":t[4]||(t[4]=e=>m.showRoom=e),round:"",position:"bottom"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{modelValue:m.room,"onUpdate:modelValue":t[2]||(t[2]=e=>m.room=e),title:"请选择所在地区",options:m.roomOptions,onClose:t[3]||(t[3]=e=>m.showRoom=!1),onFinish:m.onFinishRoom},null,8,["modelValue","options","onFinish"])])),_:1},8,["show"]),(0,n.Wm)(f,{modelValue:e.name,"onUpdate:modelValue":t[5]||(t[5]=t=>e.name=t),name:"姓名",label:"姓名",placeholder:"姓名",rules:[{required:!0,message:"请填写姓名"}]},null,8,["modelValue"]),(0,n.Wm)(f,{modelValue:e.tel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.tel=t),type:"tel",name:"联系方式",label:"联系方式",placeholder:"联系方式",rules:[{required:!0,message:"请填写您的手机号码"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式错误"}]},null,8,["modelValue"]),(0,n.Wm)(f,{modelValue:e.reportContent,"onUpdate:modelValue":t[7]||(t[7]=t=>e.reportContent=t),"is-link":"",readonly:"",label:"报修内容",placeholder:"请选择报修项",onClick:t[8]||(t[8]=e=>m.showRepair=!0),rules:[{required:!0,message:"请选择您的报修项"}]},null,8,["modelValue"]),(0,n.Wm)(v,{show:m.showRepair,"onUpdate:show":t[11]||(t[11]=e=>m.showRepair=e),round:"",position:"bottom"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{modelValue:m.repairItem,"onUpdate:modelValue":t[9]||(t[9]=e=>m.repairItem=e),title:"请选择报修项",options:m.repairOptions,onClose:t[10]||(t[10]=e=>m.showRepair=!1),onFinish:m.onFinishRepair},null,8,["modelValue","options","onFinish"])])),_:1},8,["show"]),(0,n.Wm)(f,{modelValue:e.message,"onUpdate:modelValue":t[12]||(t[12]=t=>e.message=t),rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},null,8,["modelValue"]),(0,n.Wm)(w,{class:"upload",modelValue:m.fileList,"onUpdate:modelValue":t[13]||(t[13]=e=>m.fileList=e),multiple:""},null,8,["modelValue"])])),_:1}),(0,n._)("div",i,[(0,n.Wm)(y,{round:"",block:"",type:"primary",color:"#44b883","native-type":"submit"},{default:(0,n.w5)((()=>[s])),_:1})])])),_:1},8,["onSubmit"])])])])}o(8479);var d=o(8274),p=(o(2687),o(9370)),c=o(4454),f=o(5705),h=o(9843),v=o(2262),w=o(3907),g=o(2119),y=o(3204),b=o(8292),W={name:"Repairs",components:{HomeSwiper:h.Z,NavBar:y.Z},setup(){const e=(0,w.oR)(),t=(0,g.tv)(),o=(0,v.qj)({dormitory:"",name:"",tel:"",reportContent:"",message:"",staus:0,repairsUser:e.state.user.username}),a=(0,v.iH)(""),l=(0,v.iH)(""),r=(0,v.iH)(!1),u=(0,v.iH)(!1);let i=(0,v.iH)([]),s=(0,v.iH)([]);const m=({selectedOptions:e})=>{r.value=!1,o.dormitory=e.map((e=>e.text)).join("/")},h=({selectedOptions:e})=>{u.value=!1,o.reportContent=e.map((e=>e.text)).join("/")},y=(0,v.iH)([]);let W=(0,v.iH)("");const V=()=>{let n=new FormData;for(let e=0;e<y.value.length;e++)n.append("images",y.value[e].file);p.Z.confirm({title:"确认提交",message:"是否确认提交，一旦提交无法撤回！"}).then((async()=>{d.Z.loading({duration:0,message:"提交中...",forbidClick:!0}),await(0,c.d0)(n).then((({data:t})=>{console.log(t[0]);for(let o=0;o<t.length;o++)W.value+=t[o].destination.replace(".",e.state.baseUrl)+"/"+t[o].filename+",";W.value.length>0&&(console.log("test"),W.value=W.value.substr(0,W.value.length-1)),console.log(W.value)})),o["imagesUrl"]=W.value,o["createTime"]=(0,b.p)(),(0,c.bn)(o).then((e=>{console.log(e),d.Z.clear(),d.Z.success("添加成功！"),t.replace({path:"/show"})})).catch((()=>{d.Z.clear(),d.Z.fail("添加失败!")}))})).catch((()=>{}))};return(0,n.bv)((()=>{(0,f.Rl)().then((e=>{s.value=e.data})),(0,f.FA)().then((e=>{i.value=e.data}))})),{repairItem:l,room:a,fileList:y,...(0,v.BK)(o),onSubmit:V,showRoom:r,showRepair:u,roomOptions:i,repairOptions:s,onFinishRoom:m,onFinishRepair:h}}},V=o(3744);const R=(0,V.Z)(W,[["render",m],["__scopeId","data-v-b266341c"]]);var _=R}}]);
//# sourceMappingURL=375.39494d10.js.map