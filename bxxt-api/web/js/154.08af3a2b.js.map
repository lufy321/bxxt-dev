{"version":3,"file":"js/154.08af3a2b.js","mappings":"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","sources":["webpack://bxxt/./src/views/show/Show.vue","webpack://bxxt/./src/components/content/goods/GoodsList.vue","webpack://bxxt/./src/components/content/goods/GoodsList.vue?edb4","webpack://bxxt/./src/components/content/goods/GoodsListItem.vue","webpack://bxxt/./src/components/content/goods/GoodsListItem.vue?b4c2","webpack://bxxt/./src/views/show/Show.vue?0e5d"],"sourcesContent":["<template>\r\n  <div class=\"show\">\r\n    <nav-bar>\r\n      <template v-slot:left></template>\r\n      <template v-slot:default>报修列表</template>\r\n    </nav-bar>\r\n    <div class=\"show-body\">\r\n      <van-search\r\n        class=\"search\"\r\n        v-model=\"value\"\r\n        show-action\r\n        placeholder=\"请输入搜索关键词\"\r\n        @search=\"onSearch\"\r\n      >\r\n        <template #action>\r\n          <div @click=\"onClickButton\">搜索</div>\r\n        </template>\r\n      </van-search>\r\n\r\n      <van-tabs\r\n        v-model:active=\"active\"\r\n        swipeable\r\n        sticky\r\n        color=\"#42b983\"\r\n        @change=\"Change\"\r\n      >\r\n        <van-tab v-for=\"iName in itemName\" :title=\"iName\">\r\n          <van-pull-refresh v-model=\"state.refreshing\" @refresh=\"onRefresh\">\r\n            <van-list\r\n              class=\"van-list\"\r\n              v-model:loading=\"state.loading\"\r\n              :finished=\"state.finished\"\r\n              finished-text=\"没有更多了\"\r\n              @load=\"onLoad\"\r\n              :immediate-check=\"false\"\r\n            >\r\n              <goods-list class=\"goods-list\">\r\n                <goods-list-item\r\n                  v-for=\"item in goods[currentType].list\"\r\n                  :product=\"item\"\r\n                  :key=\"item\"\r\n                />\r\n              </goods-list>\r\n            </van-list>\r\n          </van-pull-refresh>\r\n        </van-tab>\r\n      </van-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GoodsList from \"components/content/goods/GoodsList\";\r\nimport { onMounted, reactive } from \"vue\";\r\nimport { ref } from \"vue\";\r\nimport GoodsListItem from \"components/content/goods/GoodsListItem\";\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport { getForm } from \"network/form\";\r\nimport { Toast } from \"vant\";\r\nimport { useStore } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Tab\",\r\n  components: {\r\n    GoodsList,\r\n    GoodsListItem,\r\n    NavBar,\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const goods = reactive({\r\n      new: { page: 1, list: [] },\r\n      ing: { page: 1, list: [] },\r\n      end: { page: 1, list: [] },\r\n    });\r\n    let totalPage = ref(0);\r\n    let currentType = ref(\"new\");\r\n    const state = reactive({\r\n      loading: true,\r\n      finished: false,\r\n      refreshing: false,\r\n    });\r\n    let active = ref(0);\r\n    let itemName = [\"新报修\", \"待维修\", \"已修好\"];\r\n    const Change = () => {\r\n      console.log(\"change\");\r\n      let type = [\"new\", \"ing\", \"end\"];\r\n      currentType.value = type[active.value];\r\n      console.log(currentType.value);\r\n      onRefresh();\r\n    };\r\n\r\n    const value = ref(\"\");\r\n    const onSearch = (val) => Toast(val);\r\n    const onClickButton = () => Toast(value.value);\r\n\r\n    onMounted(() => {\r\n      console.log(\"onMounted\");\r\n      onRefresh();\r\n    });\r\n\r\n    const loadData = () => {\r\n      console.log(\"3loadData\");\r\n      console.log(active.value);\r\n      getForm(\r\n        active.value,\r\n        goods[currentType.value].page,\r\n        store.state.user.username,\r\n        store.state.user.identity\r\n      ).then((res) => {\r\n        goods[currentType.value].list = goods[currentType.value].list.concat(\r\n          res.data\r\n        );\r\n        state.loading = false;\r\n        totalPage = res.sumpage;\r\n        console.log(\"总页数\" + totalPage);\r\n        console.log(\"当前页\" + goods[currentType.value].page);\r\n        console.log(\"当前页数组长度\" + res.data.length);\r\n        if (goods[currentType.value].page >= totalPage) {\r\n          state.finished = true;\r\n        }\r\n      });\r\n    };\r\n\r\n    const onLoad = () => {\r\n      console.log(\"2onLoad\");\r\n      if (!state.refreshing && goods[currentType.value].page < totalPage) {\r\n        goods[currentType.value].page += 1;\r\n      }\r\n      if (state.refreshing) {\r\n        goods[currentType.value].list = [];\r\n        state.refreshing = false;\r\n      }\r\n      loadData();\r\n    };\r\n\r\n    const onRefresh = () => {\r\n      console.log(\"1onRefresh\");\r\n      state.refreshing = true;\r\n      // 清空列表数据\r\n      state.finished = true;\r\n\r\n      // 重新加载数据\r\n      // 将 loading 设置为 true，表示处于加载状态\r\n      state.loading = true;\r\n      goods[currentType.value].page = 1;\r\n      onLoad();\r\n    };\r\n\r\n    return {\r\n      state,\r\n      onLoad,\r\n      onRefresh,\r\n      onClickButton,\r\n      value,\r\n      onSearch,\r\n      active,\r\n      Change,\r\n      currentType,\r\n      goods,\r\n      totalPage,\r\n      itemName,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.show {\r\n}\r\n\r\n.show-body {\r\n  height: calc(100vh - 45px);\r\n}\r\n\r\n.search {\r\n  margin-top: 45px;\r\n}\r\n\r\n.goods-list {\r\n  width: 97%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.van-list {\r\n  margin-bottom: 50px;\r\n}\r\n</style>","<template>\r\n  <div class=\"goods-list\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"GoodsList\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .goods-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-around;\r\n    padding: 5px;\r\n  }\r\n</style>","import { render } from \"./GoodsList.vue?vue&type=template&id=a0f76294&scoped=true\"\nimport script from \"./GoodsList.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsList.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsList.vue?vue&type=style&index=0&id=a0f76294&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Zero\\\\Desktop\\\\bxxt\\\\bxxt\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a0f76294\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"goods-item\" @click=\"itemClick\">\r\n    <div class=\"goods-head\">\r\n<!--      <span>巡检</span>-->\r\n      <span>单号：{{product.id}}</span>\r\n    </div>\r\n    <div class=\"goods-info\">\r\n      <div class=\"info-title\"><span>报修项：</span><span>{{product.reportContent}}</span></div>\r\n      <div class=\"info-title\"><span>地点：</span><span>{{product.dormitory}}</span></div>\r\n      <div class=\"info-title\"><span>故障：</span><span>{{product.message}}</span></div>\r\n    </div>\r\n    <div class=\"goods-foot\">\r\n        <div>报修人：{{ product.name }}</div>\r\n        <div>报修时间：{{formatTime(product.createTime)}}</div>\r\n        <div v-if=\"product.staus > 0\">接单人：{{ product.pickUser }}</div>\r\n        <div v-if=\"product.staus > 0\">维修时间：{{formatTime(product.acceptTime)}}-<spanv v-if=\"product.staus == 2\">{{formatTime(product.endTime)}}</spanv></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {useRouter} from 'vue-router';\r\nimport moment from 'moment';\r\n\r\nexport default {\r\n  name: \"GoodsListItem\",\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  setup(props) {\r\n    const router = useRouter();\r\n    const itemClick = () => {\r\n      router.push({path: '/detail', query: {id: props.product.id}})\r\n    }\r\n\r\n    const formatTime = (time) => {\r\n      return moment(time).format(\"YYYY-MM-DD HH:mm\");\r\n    }\r\n\r\n    return {\r\n      itemClick,\r\n      formatTime\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .goods-head {\r\n    border-bottom: 1px solid #f8f9fa;\r\n  }\r\n  .goods-item {\r\n    font-size: var(--van-cell-font-size);\r\n    width: 98%;\r\n    margin-bottom: 5px;\r\n    background-color: white;\r\n    border-radius: 3px;\r\n    padding: 10px 10px;\r\n\r\n    div {\r\n      padding: 3px;\r\n    }\r\n  }\r\n\r\n  .goods-foot {\r\n    border-top: 1px solid #f8f9fa;\r\n  }\r\n</style>","import { render } from \"./GoodsListItem.vue?vue&type=template&id=1d0006b9&scoped=true\"\nimport script from \"./GoodsListItem.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsListItem.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsListItem.vue?vue&type=style&index=0&id=1d0006b9&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Zero\\\\Desktop\\\\bxxt\\\\bxxt\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d0006b9\"]])\n\nexport default __exports__","import { render } from \"./Show.vue?vue&type=template&id=6ed7bec8&scoped=true\"\nimport script from \"./Show.vue?vue&type=script&lang=js\"\nexport * from \"./Show.vue?vue&type=script&lang=js\"\n\nimport \"./Show.vue?vue&type=style&index=0&id=6ed7bec8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Zero\\\\Desktop\\\\bxxt\\\\bxxt\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ed7bec8\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createVNode","_component_nav_bar","left","default","_createElementVNode","_component_van_search","$setup","$event","placeholder","onSearch","action","onClick","_component_van_tabs","active","swipeable","sticky","color","onChange","_Fragment","_renderList","iName","_createBlock","_component_van_tab","title","_component_van_pull_refresh","refreshing","onRefresh","_component_van_list","loading","finished","onLoad","_component_goods_list","list","item","_component_goods_list_item","product","key","_renderSlot","_ctx","undefined","name","__exports__","_toDisplayString","$props","id","_hoisted_4","reportContent","_hoisted_6","dormitory","_hoisted_8","message","createTime","staus","_hoisted_10","pickUser","_hoisted_11","acceptTime","_component_spanv","endTime","props","type","Object","setup","router","useRouter","itemClick","push","path","query","formatTime","time","moment","format","components","GoodsList","GoodsListItem","NavBar","store","useStore","goods","reactive","new","page","ing","end","totalPage","ref","currentType","state","itemName","Change","console","log","value","val","onClickButton","onMounted","loadData","getForm","user","username","identity","then","res","concat","data","sumpage","length","render"],"sourceRoot":""}