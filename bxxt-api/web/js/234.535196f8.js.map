{"version":3,"file":"js/234.535196f8.js","mappings":"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","sources":["webpack://bxxt/./src/network/option.js","webpack://bxxt/./src/utils/Time.js","webpack://bxxt/./src/views/detail/Detail.vue","webpack://bxxt/./node_modules/vant/es/image-preview/index.js","webpack://bxxt/./src/views/detail/Detail.vue?6711"],"sourcesContent":["import {request} from './request';\r\n\r\n// 获取报修项下拉列表\r\nexport function getOption() {\r\n    return request({\r\n        url: '/my/getOption'\r\n    })\r\n}\r\n\r\n// 获取材料项下拉列表\r\nexport function getMaterialOption() {\r\n    return request({\r\n        url: '/my/getMaterialOption'\r\n    })\r\n}\r\n\r\n// 获取报修地点下拉列表\r\nexport function getSiteOption() {\r\n    return request({\r\n        url: '/my/getSiteOption'\r\n    })\r\n}","export function formatDate() {\r\n    var d = new Date();\r\n    //获取一个4位数的年份；\r\n    var year = d.getFullYear();\r\n    //获取月份\r\n    var month = d.getMonth() + 1;\r\n    month = month >= 10 ? month : '0' + month;\r\n    //获取天\r\n    var date = d.getDate();\r\n    date = date >= 10 ? date : '0' + date;\r\n    //获取小时\r\n    var hours = d.getHours();\r\n    hours = hours >= 10 ? hours : '0' + hours;\r\n    //获取分钟\r\n    var minutes = d.getMinutes();\r\n    minutes = minutes >= 10 ? minutes : '0' + minutes;\r\n    //获取秒\r\n    var seconds = d.getSeconds();\r\n    seconds = seconds >= 10 ? seconds : '0' + seconds;\r\n\r\n    return year + '-' + month + '-' + date + ' ' + hours + ':' + minutes + ':' + seconds;\r\n}","<template>\r\n  <div class=\"detail\">\r\n    <nav-bar>\r\n      <template v-slot:left></template>\r\n      <template v-slot:default>详情</template>\r\n    </nav-bar>\r\n    <div class=\"detail-body\">\r\n      <van-cell-group inset class=\"repairs-info\">\r\n        <van-cell title=\"报修信息\" />\r\n        <van-cell title=\"单号\" :value=\"formData.id\" />\r\n        <van-cell title=\"姓名\" :value=\"formData.name\" />\r\n        <van-cell title=\"工号\" :value=\"formData.repairsUser\" />\r\n        <van-cell title=\"电话\" :value=\"formData.tel\" />\r\n        <van-cell title=\"提报时间\" :value=\"formData.createTime\" />\r\n        <van-cell title=\"报修项\" :value=\"formData.reportContent\" />\r\n        <van-cell title=\"地点\" :value=\"formData.dormitory\" />\r\n        <van-cell title=\"故障描述\" :value=\"formData.message\" />\r\n      </van-cell-group>\r\n      <van-cell-group inset class=\"flow-info\">\r\n        <van-cell title=\"报修图片\" />\r\n        <div class=\"upimg-list\">\r\n          <van-image v-for=\"(item, index) in imageList\" :key=\"item\" width=\"100\" height=\"100\" :src=\"item\" lazy-load\r\n            @click=\"sceneImg(index)\" />\r\n        </div>\r\n      </van-cell-group>\r\n\r\n      <van-cell-group inset class=\"repairs-info\">\r\n        <van-cell title=\"维修信息\" />\r\n        <van-cell title=\"工号\" :value=\"formData.pickUser\" />\r\n        <van-cell title=\"接单时间\" :value=\"formData.acceptTime\" />\r\n        <van-cell title=\"完成时间\" :value=\"formData.endTime\" />\r\n        <van-cell title=\"维修材料\" :value=\"formData.usedMaterial\" />\r\n        <van-cell title=\"材料备注\" :value=\"formData.usedDetail\" />\r\n      </van-cell-group>\r\n\r\n      <van-form @submit=\"onSubmit\">\r\n        <van-cell-group inset class=\"flow-info\" v-if=\"formData.staus === 2\">\r\n          <van-cell title=\"维修图片\" />\r\n          <div class=\"upimg-list\">\r\n            <van-image v-for=\"(item, index) in repairImageList\" :key=\"item\" width=\"100\" height=\"100\" :src=\"item\"\r\n              lazy-load @click=\"sceneRepairImage(index)\" />\r\n          </div>\r\n        </van-cell-group>\r\n\r\n        <van-cell-group inset class=\"flow-info\" v-if=\"formData.staus === 1 && user.identity == 0\">\r\n          <van-field v-model=\"updateFormData.usedMaterial\" is-link readonly label=\"使用材料\" placeholder=\"请选择使用材料\"\r\n            @click=\"showMaterial = true\" :rules=\"[{ required: true, message: '请选择您使用的材料' }]\" />\r\n\r\n          <van-field v-model=\"updateFormData.usedDetail\" name=\"材料备注\" label=\"材料备注\" placeholder=\"具体使用材料\" />\r\n\r\n          <van-popup v-model:show=\"showMaterial\" round position=\"bottom\">\r\n            <van-cascader v-model=\"materialItem\" title=\"请选择使用的材料\" :options=\"materialOptions\"\r\n              @close=\"showMaterial = false\" @finish=\"onFinishMaterial\" />\r\n          </van-popup>\r\n          <van-uploader class=\"upload\" v-model=\"fileList\" multiple />\r\n        </van-cell-group>\r\n\r\n        <div style=\"margin: 16px\" v-if=\"formData.staus === 0 && user.identity == 0\">\r\n          <van-button round block type=\"primary\" color=\"#44b883\" @click=\"acceptSubmit\">\r\n            接单\r\n          </van-button>\r\n        </div>\r\n        <div style=\"margin: 16px\" v-else-if=\"formData.staus === 1 && user.identity == 0\">\r\n          <van-button round block type=\"primary\" color=\"#44b883\" native-type=\"submit\">\r\n            处理完成\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport {\r\n  getDetail,\r\n  setStaus,\r\n  updateAcceptData,\r\n  upLoad,\r\n  updateForm,\r\n} from \"network/form\";\r\nimport { getMaterialOption } from \"network/option\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { ref, reactive, toRefs, onMounted } from \"vue\";\r\nimport moment from \"moment\";\r\nimport { Dialog, ImagePreview, Toast } from \"vant\";\r\nimport { useStore } from \"vuex\";\r\nimport { formatDate } from \"utils/Time\";\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  components: {\r\n    NavBar,\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    let data = reactive({\r\n      formData: {},\r\n      updateFormData: {\r\n        endImagesUrl: \"\",\r\n        usedMaterial: \"\",\r\n        endTime: \"\",\r\n        usedDetail: \"\",\r\n        id: \"\",\r\n        pickUser: \"\",\r\n      },\r\n    });\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    let id = ref(0);\r\n    id.value = route.query.id;\r\n    data.updateFormData.id = id;\r\n\r\n    const materialItem = ref(\"\");\r\n    const showMaterial = ref(false);\r\n    let materialOptions = ref([]);\r\n\r\n    const onFinishMaterial = ({ selectedOptions }) => {\r\n      showMaterial.value = false;\r\n      data.updateFormData.usedMaterial = selectedOptions\r\n        .map((option) => option.text)\r\n        .join(\"/\");\r\n    };\r\n\r\n    let imageList = ref([]);\r\n    let repairImageList = ref([]);\r\n\r\n    // 维修工上传图片列表\r\n    const fileList = ref([]);\r\n    let imagesUrl = ref(\"\");\r\n\r\n    const sceneImg = (index) => {\r\n      ImagePreview({\r\n        images: imageList.value,\r\n        startPosition: index,\r\n      });\r\n    };\r\n\r\n    const sceneRepairImage = (index) => {\r\n      ImagePreview({\r\n        images: repairImageList.value,\r\n        startPosition: index,\r\n      });\r\n    };\r\n\r\n    onMounted(() => {\r\n      getDetail(id.value).then((res) => {\r\n        data.formData = res.data;\r\n        data.formData[\"createTime\"] = moment(\r\n          data.formData[\"createTime\"]\r\n        ).format(\"YYYY-MM-DD HH:mm\");\r\n        if (data.formData[\"acceptTime\"]) {\r\n          data.formData[\"acceptTime\"] = moment(\r\n            data.formData[\"acceptTime\"]\r\n          ).format(\"YYYY-MM-DD HH:mm\");\r\n        }\r\n        if (data.formData[\"endTime\"]) {\r\n          data.formData[\"endTime\"] = moment(data.formData[\"endTime\"]).format(\r\n            \"YYYY-MM-DD HH:mm\"\r\n          );\r\n        }\r\n        if (data.formData[\"endImagesUrl\"]) {\r\n          repairImageList.value = data.formData.endImagesUrl.split(\",\");\r\n        }\r\n        if (data.formData[\"imagesUrl\"]) {\r\n          imageList.value = data.formData.imagesUrl.split(\",\");\r\n        }\r\n      });\r\n      getMaterialOption().then(({ data }) => {\r\n        materialOptions.value = data;\r\n      });\r\n    });\r\n\r\n    const acceptSubmit = () => {\r\n      Toast.loading({\r\n        duration: 0,\r\n        message: \"接单中...\",\r\n        forbidClick: true,\r\n      });\r\n      const acceptData = reactive({\r\n        id: id.value,\r\n        acceptTime: formatDate(),\r\n        pickUser: store.state.user.username,\r\n      });\r\n      updateAcceptData(acceptData).then((res) => { });\r\n      setStaus(1, id.value).then((res) => {\r\n        Toast.clear();\r\n        Toast.success(\"接单成功！\");\r\n        router.replace({ path: \"/show\" });\r\n      });\r\n    };\r\n\r\n    const onSubmit = () => {\r\n      let endImages = new FormData();\r\n      for (let i = 0; i < fileList.value.length; i++) {\r\n        endImages.append(\"images\", fileList.value[i].file);\r\n      }\r\n      Dialog.confirm({\r\n        title: \"确认提交\",\r\n        message: \"是否确认提交，一旦提交无法撤回！\",\r\n      }).then(async () => {\r\n        Toast.loading({\r\n          duration: 0,\r\n          message: \"提交中...\",\r\n          forbidClick: true,\r\n        });\r\n        await upLoad(endImages).then(({ data }) => {\r\n          for (let i = 0; i < data.length; i++) {\r\n            imagesUrl.value +=\r\n              data[i].destination.replace(\".\", store.state.baseUrl) +\r\n              \"/\" +\r\n              data[i].filename +\r\n              \",\";\r\n          }\r\n          if (imagesUrl.value.length > 0) {\r\n            imagesUrl.value = imagesUrl.value.substr(\r\n              0,\r\n              imagesUrl.value.length - 1\r\n            );\r\n          }\r\n          console.log(imagesUrl.value);\r\n        });\r\n\r\n        data.updateFormData[\"endImagesUrl\"] = imagesUrl.value;\r\n        data.updateFormData[\"endTime\"] = formatDate();\r\n        updateForm(data.updateFormData).then((res) => {\r\n          setStaus(2, id.value).then((res) => {\r\n            Toast.clear();\r\n            Toast.success(\"提交完成！\");\r\n            router.replace({ path: \"/show\" });\r\n          });\r\n        }).catch(() => {\r\n          Toast.clear();\r\n          Toast.fail(\"提交失败！\");\r\n        })\r\n      });\r\n    };\r\n\r\n    return {\r\n      materialItem,\r\n      showMaterial,\r\n      onFinishMaterial,\r\n      materialOptions,\r\n      ...toRefs(data),\r\n      ...toRefs(store.state),\r\n      onSubmit,\r\n      acceptSubmit,\r\n      imageList,\r\n      repairImageList,\r\n      sceneImg,\r\n      sceneRepairImage,\r\n      fileList,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.detail-body {\r\n  margin-top: 50px;\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.van-cell__value {\r\n  text-align: left;\r\n}\r\n\r\n.upload {\r\n  margin-top: 5px;\r\n  padding: var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding);\r\n}\r\n\r\n.repairs-info {\r\n  margin-top: 5px;\r\n}\r\n\r\n.flow-info {\r\n  margin-top: 5px;\r\n}\r\n\r\n.upimg-list {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  padding: var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding);\r\n}\r\n\r\n.van-image {\r\n  margin: 5px;\r\n}\r\n</style>","import { ImagePreview } from \"./function-call\";\nvar stdin_default = ImagePreview;\nexport {\n  ImagePreview,\n  stdin_default as default\n};\n","import { render } from \"./Detail.vue?vue&type=template&id=27f348e2\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=27f348e2&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Zero\\\\Desktop\\\\bxxt\\\\bxxt\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getOption","request","url","getMaterialOption","getSiteOption","formatDate","d","Date","year","getFullYear","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","class","style","_createElementBlock","_createVNode","_component_nav_bar","left","default","_createElementVNode","_component_van_cell_group","inset","_component_van_cell","title","value","_ctx","id","name","repairsUser","tel","createTime","reportContent","dormitory","message","_Fragment","_renderList","$setup","item","index","_createBlock","_component_van_image","key","width","height","src","onClick","pickUser","acceptTime","endTime","usedMaterial","usedDetail","_component_van_form","onSubmit","staus","identity","_component_van_field","$event","readonly","label","placeholder","rules","required","_component_van_popup","show","round","position","_component_van_cascader","options","onClose","onFinish","_component_van_uploader","multiple","_component_van_button","block","type","color","stdin_default","components","NavBar","setup","store","useStore","data","reactive","formData","updateFormData","endImagesUrl","route","useRoute","router","useRouter","ref","query","materialItem","showMaterial","materialOptions","onFinishMaterial","selectedOptions","map","option","text","join","imageList","repairImageList","fileList","imagesUrl","sceneImg","images","startPosition","sceneRepairImage","onMounted","getDetail","then","res","moment","format","split","acceptSubmit","duration","forbidClick","acceptData","state","user","username","updateAcceptData","setStaus","replace","path","endImages","FormData","i","length","append","file","async","upLoad","destination","baseUrl","filename","substr","console","log","updateForm","catch","toRefs","__exports__","render"],"sourceRoot":""}