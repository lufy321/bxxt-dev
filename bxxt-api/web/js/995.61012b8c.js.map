{"version":3,"file":"js/995.61012b8c.js","mappings":"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","sources":["webpack://bxxt/./src/network/user.js","webpack://bxxt/./src/network/userInfo.js","webpack://bxxt/./src/views/profile/Login.vue","webpack://bxxt/./src/views/profile/Login.vue?fc56"],"sourcesContent":["import {request} from './request';\r\n\r\n// 用户登录\r\nexport function login(data) {\r\n    return request({\r\n        url: '/api/login',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n// 用户注册\r\nexport function register(data) {\r\n    return request({\r\n        url: '/api/register',\r\n        method: 'post',\r\n        data\r\n    })\r\n}","import {request} from './request';\r\n\r\n// 获取用户信息\r\nexport function getUserInfo() {\r\n    return request({\r\n        url: '/my/getUserInfo'\r\n    })\r\n}\r\n\r\n// 用户登出\r\nexport function logOut() {\r\n    return request({\r\n        url: '/my/logOut',\r\n        method: 'post'\r\n    })\r\n}","<template>\r\n  <div class=\"login\">\r\n    <nav-bar>\r\n      <template v-slot:left></template>\r\n      <template v-slot:default>用户登录</template>\r\n    </nav-bar>\r\n\r\n    <div class=\"top-img\">\r\n      <van-image width=\"10rem\" height=\"5rem\" fit=\"contain\" :src=\"logo\"/>\r\n    </div>\r\n\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-field\r\n        v-model=\"username\"\r\n        name=\"工号\"\r\n        label=\"工号\"\r\n        placeholder=\"请输入您的工号\"\r\n        :rules=\"[{ required: true, message: '请填写您的工号' }   ]\"\r\n      />\r\n      <van-field\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        name=\"密码\"\r\n        label=\"密码\"\r\n        placeholder=\"密码\"\r\n        :rules=\"[{required: true, message: '请填写密码'}]\"\r\n      />\r\n\r\n      <div class=\"su-button\">\r\n        <div class=\"link-login\" @click=\"$router.push({path:'/register'})\">\r\n          没有账号，立即注册\r\n        </div>\r\n        <van-button round block type=\"info\" color=\"#44b883\" native-type=\"submit\">\r\n        提交\r\n        </van-button>\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport {useRouter} from 'vue-router';\r\nimport {ref, reactive, toRefs} from 'vue';\r\nimport {Notify, Toast} from \"vant\";\r\nimport {login} from \"network/user\";\r\nimport {getUserInfo} from \"network/userInfo\";\r\nimport {useStore} from 'vuex';\r\n\r\nexport default {\r\n  email: \"Register\",\r\n  components: {\r\n    NavBar\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const store = useStore()\r\n    const userinfo = reactive({\r\n      username: \"\",\r\n      password: \"\",\r\n    });\r\n    const image = reactive({\r\n      logo: `http://nxbx.ejianlong.com:8086/assets/images/logo.png`\r\n    })\r\n    console.log(image.logo);\r\n    const onSubmit = () => {\r\n      Toast.loading({\r\n        duration: 0,\r\n        message: '登录中...',\r\n        forbidClick: true\r\n      })\r\n      console.log(userinfo.username)\r\n      login(userinfo).then(async res => {\r\n        // 将token保存在本地window.localStorage setItem(key, value) getItem(key)\r\n        window.localStorage.setItem('token', res.token);\r\n        //获取用户信息保存至store中\r\n        await getUserInfo().then(({data}) => {\r\n          store.commit('setUserInfo', data)\r\n        })\r\n        // 在vuex islogin\r\n        store.commit('setIslogin', true);\r\n        console.log(res);\r\n        Toast.clear();\r\n        if (res.status == 0) {\r\n          Toast.success(`登录成功,欢迎${store.state.user.identity == 0 ? `${store.state.user.username}管理员` : `${store.state.user.username}用户`}`);\r\n          router.go(-1);\r\n          userinfo.username = \"\";\r\n          userinfo.password = \"\";\r\n        }else{\r\n          Toast.fail(\"登录失败\");\r\n        }\r\n      })\r\n    }\r\n\r\n    return {\r\n      ...toRefs(userinfo),\r\n      ...toRefs(image),\r\n      onSubmit,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .top-img {\r\n    margin-top: 80px;\r\n    text-align: center;\r\n  }\r\n  .su-button {\r\n    margin: 16px;\r\n  }\r\n  .link-login {\r\n    text-align: center;\r\n    margin-bottom: 10px;\r\n    color: var(--color-tint);\r\n  }\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=332d8a02&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=332d8a02&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Zero\\\\Desktop\\\\bxxt\\\\bxxt\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-332d8a02\"]])\n\nexport default __exports__"],"names":["login","data","request","url","method","register","getUserInfo","logOut","class","_createElementBlock","_createVNode","_component_nav_bar","left","default","_createElementVNode","_component_van_image","width","height","fit","src","_ctx","_component_van_form","onSubmit","$setup","_component_van_field","$event","name","label","placeholder","rules","required","message","type","onClick","push","path","_component_van_button","round","block","color","email","components","NavBar","setup","router","useRouter","store","useStore","userinfo","reactive","username","password","image","logo","console","log","duration","forbidClick","then","async","window","localStorage","setItem","res","token","commit","status","state","user","identity","go","toRefs","__exports__","render"],"sourceRoot":""}